<!DOCTYPE html>
<html>
    <head>
        <title>LiWi Art</title>
        {% include 'home/header.html' %}
    </head>
    <body>
        {% include 'home/navigation.html' %}
        {% csrf_token %}
        {% for a in art %}
            <img src="{{ a.photo.url }}" height="200" />
            {{ a.title }}
            {{ a.description }}
            {% if user.is_authenticated %}
                <button type="button" id="{{ a.id }}" class="btn btn-default btn-lg like_btn">
                {% if a.id not in liked_art%}
                    <span id="heart-{{ a.id }}"class="glyphicon glyphicon-heart-empty"></span> Like
                {% else %}
                  <span class="glyphicon glyphicon-heart"></span> Liked
                {% endif %}
                </button>
            {% else %}
                <button type="button" id="{{ a.id }}" class="btn btn-default btn-lg like_btn_login">
                    <span id="heart-{{ a.id }}"class="glyphicon glyphicon-heart-empty"></span> Like
                </button>
            {% endif %}
        {% endfor %}
        <script>
            $(".like_btn").click(function(){
                    $("#heart-" + this.id).attr('class', 'glyphicon glyphicon-heart');
                   $.ajax({
                        type:"POST",
                        beforeSend: function (xhr, settings)
                        {
                            xhr.setRequestHeader("X-CSRFToken", '{{ csrf_token}}');
                        },
                        url: "/art/like/" + this.id + '/',
                        success: function() {
                        }
                })
            });

            $(".like_btn_login").click(function(){
                window.location.replace('/login/')
            });
        </script>
    </body>
</html>